# 信息检索系统

## 项目概述

本项目是一个完整的信息检索系统，实现了多种信息检索算法和交互功能，包括倒排索引构建、布尔检索、短语检索、TF-IDF向量空间模型检索等核心功能。系统支持交互式查询界面，能够对结构化文档数据进行高效检索和可视化展示。

## 功能特性

- **倒排索引构建**：实现了高效的倒排索引结构，支持快速的文档检索
- **多种检索模式**：
  - 单个词项搜索
  - 短语检索
  - 布尔查询（支持 AND、OR、NOT 操作符）
  - TF-IDF 向量空间模型检索
- **Skip Pointer 优化**：提高短语检索效率
- **HTML 结果可视化**：
  - 支持将检索结果导出为 HTML 文件
  - 自动高亮显示检索词项
  - 可展示完整文档内容
- **交互式用户界面**：提供友好的命令行交互体验
- **分词与停用词处理**：支持中文文本的预处理

## 项目结构

```
Lab_1/
├── data/                # 原始数据目录
│   └── All_Unpack/      # XML 格式的原始数据文件
├── fenlei/              # 分类数据文件
│   ├── EV.csv           # 事件数据
│   ├── event.csv        # 事件详细信息
│   ├── group.csv        # 群组信息
│   └── members.csv      # 成员信息
├── init.py              # 初始化模块（分词、倒排索引构建等）
├── inverted_list.json   # 倒排索引文件
├── main.py              # 主程序入口
├── search.py            # 搜索功能实现（布尔搜索、TF-IDF 等）
├── skip_pointer.py      # Skip Pointer 优化实现
├── stopwords.txt        # 停用词列表
└── events_data.json     # 文档数据文件
```

## 技术栈

- **编程语言**：Python 3.x
- **主要库**：
  - NLTK（自然语言处理）
  - JSON（数据处理）
  - 正则表达式（文本处理）
  - 数学计算库（相似度计算）
- **数据结构**：倒排索引、向量空间模型、Skip List

## 安装与配置

### 环境要求

- Python 3.6 或更高版本
- 所需 Python 包：
  - nltk

### 安装步骤

1. 克隆项目代码到本地：
   ```bash
   git clone <项目地址>
   cd d:\python project\web_lab\Lab_1
   ```

2. 安装必要的依赖：
   ```bash
   pip install nltk
   ```

3. 下载 NLTK 数据：
   ```python
   import nltk
   nltk.download('punkt_tab')
   ```

## 使用说明

### 交互式搜索界面

运行主程序以启动交互式搜索界面：

```bash
python main.py
```

在交互式界面中，您可以选择以下功能：

1. **单个词项搜索**：搜索包含特定词项的文档
2. **短语检索**：搜索包含特定短语的文档
3. **布尔查询**：使用 AND (`*`)、OR (`+`)、NOT (`-`) 操作符构建复杂查询
4. **TF-IDF 搜索**：基于向量空间模型的相似度搜索
5. **TF-IDF 搜索并显示前5个结果完整内容(HTML格式)**：生成包含完整文档内容的HTML文件
6. **退出**：关闭程序

### 搜索示例

#### 单个词项搜索
```
请输入要搜索的词项: 药检所
```

#### 布尔查询
```
请输入要搜索的布尔表达式: 药检所 * 活动
```

#### HTML 结果导出
```
请输入要搜索的词项: 药检所
请输入HTML文件名(默认search_results_full.html): 药检所搜索结果
```

## 核心算法说明

### 1. 倒排索引

倒排索引是一种将词项映射到包含它们的文档的数据结构，用于快速定位包含特定词项的文档。本系统实现了高效的倒排索引构建和查询算法。

### 2. Skip Pointer 优化

为了提高短语检索的效率，系统实现了 Skip Pointer 技术，允许在倒排表中跳过不可能匹配的文档 ID，从而减少比较次数。

### 3. TF-IDF 向量空间模型

TF-IDF（词频-逆文档频率）是一种用于信息检索与文本挖掘的常用加权技术：
- **词频 (TF)**：衡量一个词项在文档中出现的频率
- **逆文档频率 (IDF)**：衡量一个词项的重要性
- **向量空间模型**：将文档和查询表示为向量，通过余弦相似度计算文档与查询的相关程度

## 性能优化

- **延迟加载**：TF-IDF 模型的关键组件（文档列表、IDF 值、文档向量）采用延迟加载策略，减少内存占用
- **倒排索引压缩**：使用差值编码技术压缩倒排索引，减少存储空间
- **Skip Pointer 算法**：加速短语检索过程
- **相关文档过滤**：在计算相似度之前先过滤出包含查询词项的相关文档

## 结果展示

### HTML 结果格式

系统生成的 HTML 结果文件具有以下特点：
- 美观的响应式界面设计
- 清晰的查询信息展示
- 检索词项自动红色高亮
- 完整的文档内容展示
- 相似度和排名信息
- 按相似度降序排列的结果

## 注意事项

1. 确保 `events_data.json` 文件位于正确位置，否则无法获取完整文档内容
2. 对于大型数据集，首次运行 TF-IDF 搜索可能需要一些时间来构建索引
3. 布尔查询中，操作符需要与词项之间用空格分隔
4. 如果查询结果过多，系统将只显示最相关的结果

## 扩展与改进方向

1. 实现更多高级检索模型（如 BM25、语言模型）
2. 添加同义词扩展功能
3. 开发图形用户界面 (GUI)
4. 支持更复杂的查询语法
5. 实现分布式检索以提高性能
## 联系方式

如有问题或建议，请随时联系项目维护者。